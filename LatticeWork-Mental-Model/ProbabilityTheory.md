# 概率论思维模型

养天气正气，法古今完人 -- unto a full grown man!

今天效法的是 查理芒格。既是律师，又是著名价值投资者，终身学习者，多元思维模型倡导者。

## 为什么需要多元思维模型？

人是简单化，自我合理化的动物。

人在处理信息的时候，选择的是自己最熟悉的，如果你接受的是单科的教育，那么手里有锤子，看什么都是钉子。

如果你的思维模型是多元化的，100多个学科的多元模型，那么你能尽可能知道全貌，会更多拟合到真实的世界上。

所以，锻炼你的思维模型吧，复杂化你的大脑，多元化你的大脑，就越接近真实现实。

或者你身边的团队足够多元，让你能接触到哈哈哈（内参、智囊团


---
hacker news：人们讨论为什么需要学习概率论思维，因为人的原始思维是线性的，而涉及概率的往往是非线性分布。

所以要培养概率论的直觉，即概率论思维：
https://news.ycombinator.com/item?id=24633484

可视化概率论（支持中文）：https://seeing-theory.brown.edu/probability-distributions/cn.html

---

## 蒙提霍尔问题（Monty Hall Problem）

又称山羊问题 ，是概率论中一个经典的悖论问题，因其与直觉相悖而广为人知。它源自美国电视游戏节目《Let's Make a Deal》，由主持人蒙提·霍尔（Monty Hall）提出。

问题描述：

1. 你面前有三扇门：A、B、C 。
2. 其中一扇门后是汽车 （大奖），另外两扇门后是山羊 （无奖品）。
3. 主持人（知道门后内容）让你先随机选一扇门（例如选A）。
4. 主持人会打开剩下两扇门中的一扇 （如B），露出一只山羊。
5. 然后主持人问你：是否要换到另一扇未打开的门（C）？
6. 问题是：换门是否能增加赢得汽车的概率？

答案在后面


## 费马—帕斯卡系统（Fermat-Pascal System）


费马—帕斯卡系统（Fermat-Pascal System）是17世纪法国数学家皮埃尔·德·费马（Pierre de Fermat）和布莱斯·帕斯卡（Blaise Pascal）共同奠定的概率论早期核心框架。这一系统的核心贡献在于**通过数学逻辑解决不确定性问题**，尤其是基于**期望值**（Expected Value）和**组合数学**的决策分析方法。

---

### 一、历史背景：赌徒问题与点数分配
费马和帕斯卡的合作源于一个经典问题：  
**“两个赌徒在一场未完成的比赛中如何公平分配赌注？”**  
例如：  
- 两人约定谁先赢6局即赢得全部赌注，但比赛因故终止时，A赢了5局，B赢了3局。  
- 如何分配赌注才公平？

**传统观点**：按已赢局数比例分配（5:3）。  
**费马—帕斯卡的革命性思路**：  
> **考虑未来可能的胜负组合**，计算双方获胜的**概率**，再按概率分配赌注。

---

### 二、核心原理与方法
#### 1. **期望值（Expected Value）**
期望值是概率论中最关键的概念，定义为：  
$$
\text{期望值} = \sum (\text{结果的概率} \times \text{结果的价值})
$$  
**帕斯卡的“理性赌注”原则**：  
> 在面对不确定性时，应选择期望值最高的决策。

**示例**：  
若某赌局有60%概率赢100元，40%概率输50元，其期望值为：  
$$
0.6 \times 100 + 0.4 \times (-50) = 60 - 20 = 40 \text{元}
$$  
即长期参与此赌局平均每次盈利40元。

#### 2. **组合数学与概率计算**
费马和帕斯卡通过**排列组合**分析所有可能结果，解决了点数分配问题。  
**以A需再赢1局、B需再赢3局为例**：  
- 最多还需3局（即最多3次试验），所有可能结果为 $2^3 = 8$ 种。  
- A获胜的情况是至少赢1局（仅1种情况失败：连输3局）。  
- 因此A获胜概率为 $7/8$，赌注按7:1分配。

#### 3. **帕斯卡三角形（Pascal’s Triangle）**
帕斯卡提出用三角形数阵快速计算组合数（如$\binom{n}{k}$），为二项式分布奠定基础。  
**应用**：直接读取组合数，避免复杂计算。

---

### 三、费马—帕斯卡系统的现实意义
1. **现代概率论的起点**  
   - 首次将赌博直觉转化为数学理论，为贝叶斯定理、大数定律等铺路。

2. **决策科学的应用**  
   - **商业决策**：评估投资风险与收益。  
   - **保险精算**：计算保费与赔付概率。  
   - **博弈论**：纳什均衡中期望效用的计算。

3. **哲学影响**  
   - 帕斯卡的“赌注论证”（Pascal’s Wager）：用期望值分析信仰上帝的理性。

---

### 四、局限性与后续发展
1. **隐含假设**  
   - 所有结果概率必须已知且独立（现实中常不成立）。  
   - 忽略主观风险偏好（如损失厌恶）。

2. **后续突破**  
   - 伯努利家族提出**效用函数**（Utility），修正期望值的绝对性。  
   - 现代行为经济学结合心理学，修正“完全理性人”假设。

---

### 五、总结
费马—帕斯卡系统的核心价值在于：  
> **将不确定性转化为可量化的数学问题**，并通过逻辑推理寻找最优解。  
这一思想至今仍是金融、人工智能、风险管理等领域的基石。

## 山羊问题

刚刚的问题，其实是反直觉的，必须换门！

换门则赢的概率为 2/3，不换则为1/3.

如果样本变成 1000， 换门赢的概率则为 999/1000！

本质上，主持人的开门在更大的概率上提供了额外的信息，而非我们直觉上的纯随机。

从小及大，可以用 3 个门来演算。

如果建立数学模型，那么可以用贝叶斯定理验证，因为加入了“主持人打开一扇必然是羊”这一条件，就变成了条件概率。



### 蒙提霍尔问题（Monty Hall Problem）  
又称**山羊问题**，是概率论中一个经典的悖论问题，因其与直觉相悖而广为人知。它源自美国电视游戏节目《Let's Make a Deal》，由主持人蒙提·霍尔（Monty Hall）提出。

---

### **直觉 vs 真实答案**
- **直觉**：剩下两扇门（A和C），概率各为50%，换不换无所谓。  
- **真实答案**：  
  - **不换门**：赢车概率是 **1/3**；  
  - **换门**：赢车概率是 **2/3**。  

---

### **数学解释**
#### **1. 枚举所有可能情况**
假设汽车在门后的分布是随机的（等概率出现在A、B、C中），你的初始选择是A。

| 汽车所在门 | 初始选择A | 主持人打开的门 | 换门结果 | 不换结果 |
|------------|------------|----------------|----------|----------|
| A          | A          | B 或 C（随机） | 换到B/C → 山羊 | 不换 → 汽车 |
| B          | A          | C（必须打开C） | 换到B → 汽车 | 不换 → 山羊 |
| C          | A          | B（必须打开B） | 换到C → 汽车 | 不换 → 山羊 |

- **换门获胜次数**：2/3（当汽车在B或C时）；  
- **不换获胜次数**：1/3（当汽车在A时）。

---

#### **2. 条件概率分析**
- **初始选择正确概率**：1/3（汽车在A）；  
- **初始选择错误概率**：2/3（汽车在B或C）。  
- **主持人打开一扇有山羊的门**，并未改变初始概率。  
- **换门**相当于将初始1/3正确概率转为2/3的正确概率。

---

#### **3. 贝叶斯定理验证**
设事件：
- $ C_A $：汽车在门A后；  
- $ H_B $：主持人打开门B。

求：**已知主持人打开门B的情况下，汽车在A或C后的概率**。  
- $ P(C_A | H_B) = \frac{P(H_B | C_A) \cdot P(C_A)}{P(H_B)} = \frac{1/2 \cdot 1/3}{1/2} = 1/3 $；  
- $ P(C_C | H_B) = 1 - 1/3 = 2/3 $。  
因此，换到C门的获胜概率更高。

---

### **常见误解**
1. **“剩下两扇门，概率应该各占50%”**  
   - 错误原因：忽略了主持人行为的信息量。  
   - 主持人**不会打开汽车所在的门**，因此他的选择提供了额外信息。

2. **“主持人打开门是随机的”**  
   - 实际上主持人**必须打开有山羊的门**，且策略固定，因此并非完全随机。

---


### **扩展思考**
1. **门数扩展**：  
   - 如果有100扇门，你选1扇，主持人打开98扇有山羊的门，换门的胜率是99%（更直观）。  
2. **博弈论视角**：  
   - 若主持人可以选择是否打开门（非固定规则），问题复杂度上升。  
3. **现实应用**：  
   - 决策中如何利用新信息更新概率（贝叶斯推理）；  
   - 医学测试、金融投资中的条件概率问题。

---

### **总结**
蒙提霍尔问题的核心在于**信息更新与条件概率**，它揭示了人类直觉在概率问题中的局限性，并强调了数学建模的重要性。  
**记住一句话**：  
> “换门不是猜概率，而是利用主持人提供的信息提高胜率。”  

## 二项分布

### 为什么叫“**二项分布**”？

“**二项分布**”（Binomial Distribution）的名称来源于其与**二项式定理**（Binomial Theorem）的直接联系。以下是具体解释：

---

#### **1. 名称来源：二项式定理**
- **二项式定理**（Binomial Theorem）展开公式：  
  $$
  (a + b)^n = \sum_{k=0}^{n} \binom{n}{k} a^k b^{n-k}
  $$  
  这里的每一项 $ \binom{n}{k} a^k b^{n-k} $ 与二项分布的概率公式完全一致。

- **二项分布的概率公式**：  
  $$
  P(k) = \binom{n}{k} p^k (1-p)^{n-k}
  $$  
  其中 $ a = p $，$ b = 1-p $，因此二项分布是二项式定理中各项的具体概率值。

---

#### **2. “二项”的含义**
- **两个结果**：每次试验只有两种可能结果（成功或失败），例如：  
  - 抛硬币：正面或反面；  
  - 质量检测：合格或不合格；  
  - 考试答题：正确或错误。  
- **独立重复**：试验需独立进行（每次结果互不影响），且成功概率 $ p $ 固定。

---

### 如何记忆二项分布？

#### **方法一：拆解关键词**
- **二项（Bi-）**：表示“两种结果”（如成功/失败）。  
- **分布（Distribution）**：表示所有可能结果（成功次数 $ k $）的概率分布。  

**联想记忆**：  
> “二项分布 = 两个选项 + 概率分布”，比如抛硬币多次后正面出现的次数分布。

---

#### **方法二：公式结构记忆法**
将公式拆分为三部分，逐个记忆：  
1. **组合数 $ \binom{n}{k} $**：  
   - 表示从 $ n $ 次试验中选出 $ k $ 次成功的方式数。  
2. **成功概率 $ p^k $**：  
   - $ k $ 次成功的概率相乘。  
3. **失败概率 $ (1-p)^{n-k} $**：  
   - 剩余 $ n-k $ 次失败的概率相乘。  

**口诀**：  
> “组（组合数）合（成功）失（失败），二项分布跑不掉。”

---

#### **方法三：实际例子联想**
通过生活场景加深理解：  
1. **抛硬币问题**：  
   - 抛 10 次硬币，恰好出现 6 次正面的概率 → 二项分布 $ B(n=10, p=0.5) $。  
2. **考试猜题**：  
   - 单选题有 4 个选项，随机猜对 20 道题中的 5 道 → $ B(n=20, p=0.25) $。  
3. **产品质量检测**：  
   - 一批产品次品率为 2%，抽检 100 件，发现 3 件次品 → $ B(n=100, p=0.02) $。

---

#### **方法四：图形化记忆**
绘制概率分布图，观察其形状：  
- **当 $ p = 0.5 $**：分布对称（类似钟形）；  
- **当 $ p < 0.5 $**：分布右偏；  
- **当 $ p > 0.5 $**：分布左偏。  

**示例**：  
假设 $ n=4 $ 次试验，$ p=1/6 $（掷骰子出6点），概率分布如下：  
```
P(0次6点) ≈ 48.23%  
P(1次6点) ≈ 38.58%  
P(2次6点) ≈ 11.57%  
P(3次6点) ≈ 1.54%  
P(4次6点) ≈ 0.08%  
```

---

#### **方法五：对比其他分布**
- **与泊松分布对比**：  
  - 二项分布：固定试验次数 $ n $，关注成功次数 $ k $。  
  - 泊松分布：关注单位时间/空间内事件发生次数（如电话呼叫数）。  
- **与正态分布对比**：  
  - 当 $ n $ 较大且 $ p $ 不接近 0 或 1 时，二项分布近似正态分布（中心极限定理）。

---

### **总结记忆公式**
| 关键点         | 内容                                                                 |  
|----------------|---------------------------------------------------------------------|  
| 名称来源       | 来自二项式定理的展开项                                               |  
| 核心条件       | 两种结果、独立重复试验、固定成功概率 $ p $                         |  
| 公式结构       | $ P(k) = \binom{n}{k} p^k (1-p)^{n-k} $                           |  
| 应用场景       | 猜题、质检、游戏概率、医学试验等                                     |  
| 图形特征       | 对称性取决于 $ p $，$ n $ 增大时趋近正态分布                       |  

### 解释如何用**二项分布**计算“掷四次骰子，至少出现两次6点”的概率：

---

#### **1. 二项分布定义**
二项分布（Binomial Distribution）用于描述在 **n 次独立重复试验**中，事件发生 **k 次** 的概率。  
其概率质量函数为：  
$$
P(k) = \binom{n}{k} p^k (1-p)^{n-k}
$$  
- $ n $：试验次数（此处为4次掷骰子）  
- $ k $：成功次数（掷出6点的次数）  
- $ p $：单次试验成功的概率（掷出6点的概率为 $ \frac{1}{6} $）  

---

#### **2. 计算目标：至少出现两次6点**  
即 $ P(k \geq 2) = P(k=2) + P(k=3) + P(k=4) $。  

---

#### **3. 分步计算**
##### **(1) 计算 $ P(k=2) $**  
$$
P(2) = \binom{4}{2} \left(\frac{1}{6}\right)^2 \left(\frac{5}{6}\right)^2
$$  
- 组合数 $ \binom{4}{2} = \frac{4!}{2! \cdot 2!} = 6 $  
- 代入计算：  
$$
P(2) = 6 \cdot \left(\frac{1}{6}\right)^2 \cdot \left(\frac{5}{6}\right)^2 = 6 \cdot \frac{1}{36} \cdot \frac{25}{36} = \frac{150}{1296} \approx 0.1157
$$

##### **(2) 计算 $ P(k=3) $**  
$$
P(3) = \binom{4}{3} \left(\frac{1}{6}\right)^3 \left(\frac{5}{6}\right)^1
$$  
- 组合数 $ \binom{4}{3} = 4 $  
- 代入计算：  
$$
P(3) = 4 \cdot \left(\frac{1}{6}\right)^3 \cdot \left(\frac{5}{6}\right) = 4 \cdot \frac{1}{216} \cdot \frac{5}{6} = \frac{20}{1296} \approx 0.0154
$$

##### **(3) 计算 $ P(k=4) $**  
$$
P(4) = \binom{4}{4} \left(\frac{1}{6}\right)^4 \left(\frac{5}{6}\right)^0
$$  
- 组合数 $ \binom{4}{4} = 1 $  
- 代入计算：  
$$
P(4) = 1 \cdot \left(\frac{1}{6}\right)^4 \cdot 1 = \frac{1}{1296} \approx 0.00077
$$

---

#### **4. 总概率**  
将三部分相加：  
$$
P(k \geq 2) = 0.1157 + 0.0154 + 0.00077 \approx 0.1319 \quad (\text{约 } 13.19\%)
$$

---

#### **5. 对立事件法（更快捷）**
也可以通过计算对立事件（0次或1次6点）再用1减去：  
$$
P(k \geq 2) = 1 - P(k=0) - P(k=1)
$$  
- **计算 $ P(k=0) $**：  
  $$
  P(0) = \binom{4}{0} \left(\frac{1}{6}\right)^0 \left(\frac{5}{6}\right)^4 = 1 \cdot 1 \cdot \left(\frac{625}{1296}\right) \approx 0.4823
  $$
- **计算 $ P(k=1) $**：  
  $$
  P(1) = \binom{4}{1} \left(\frac{1}{6}\right)^1 \left(\frac{5}{6}\right)^3 = 4 \cdot \frac{1}{6} \cdot \frac{125}{216} = \frac{500}{1296} \approx 0.3858
  $$
- **总对立概率**：  
  $$
  P(k=0) + P(k=1) = 0.4823 + 0.3858 = 0.8681
  $$
- **最终结果**：  
  $$
  P(k \geq 2) = 1 - 0.8681 = 0.1319 \quad (\text{与直接求和一致})
  $$

---

### **结论**
- **概率约为 13.19%**  
- **含义**：掷四次骰子，至少出现两次6点的概率约为 **13.19%**，远低于“至少一次6点”的 51.77%。

---

### **关键公式总结**
| 情况               | 公式                                                                 |  
|--------------------|----------------------------------------------------------------------|  
| 至少一次6点         | $ 1 - \left(\frac{5}{6}\right)^4 \approx 51.77\% $                |  
| 至少两次6点         | $ \sum_{k=2}^{4} \binom{4}{k} \left(\frac{1}{6}\right)^k \left(\frac{5}{6}\right)^{4-k} \approx 13.19\% $ |  
| 对立事件法         | $ 1 - P(k=0) - P(k=1) \approx 13.19\% $                          |  

